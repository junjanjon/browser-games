<!DOCTYPE html>
<html>
<head>
	<title>Canvas Shooting Game</title>
	<style>
		canvas {
			border: 2px solid black;
		}
	</style>
</head>
<body onload="init()">

	<canvas id="canvas" width="400" height="400"></canvas>

	<script>

		var canvas = document.getElementById('canvas');
		var ctx = canvas.getContext('2d');

		var player = {
			x: 200,
			y: 350,
			size: 20,
			color: 'blue'
		};

		var bullets = [];
		var enemies = [];

		function init() {

			window.addEventListener('keydown', function(event) {

				switch (event.keyCode) {
					case 37:
						player.x -= 10;
						break;
					case 39:
						player.x += 10;
						break;
					case 32:
						shoot();
						break;
				}
			});

			setInterval(function() {

				ctx.clearRect(0, 0, canvas.width, canvas.height);

				drawPlayer();
				drawBullets();
				drawEnemies();
				moveBullets();
				moveEnemies();

				if (Math.random() < 0.1) {
					spawnEnemy();
				}

				detectCollision();

			}, 30);

		}

		function drawPlayer() {
			ctx.fillStyle = player.color;
			ctx.fillRect(player.x - player.size/2, player.y - player.size/2, player.size, player.size);
		}

		function drawBullets() {
			ctx.fillStyle = 'black';
			for (var i = 0; i < bullets.length; i++) {
				ctx.fillRect(bullets[i].x - 2, bullets[i].y - 5, 4, 10);
			}
		}

		function drawEnemies() {
			ctx.fillStyle = 'red';
			for (var i = 0; i < enemies.length; i++) {
				ctx.fillRect(enemies[i].x - 10, enemies[i].y - 10, 20, 20);
			}
		}

		function moveBullets() {
			for (var i = 0; i < bullets.length; i++) {
				bullets[i].y -= 10;
				if (bullets[i].y < 0) {
					bullets.splice(i, 1);
					i--;
				}
			}
		}

		function moveEnemies() {
			for (var i = 0; i < enemies.length; i++) {
				enemies[i].y += 5;
				if (enemies[i].y > canvas.height + 10) {
					enemies.splice(i, 1);
					i--;
				}
			}
		}

		function spawnEnemy() {
			var enemy = {
				x: Math.random() * canvas.width,
				y: -10
			};
			enemies.push(enemy);
		}

		function shoot() {
			var bullet = {
				x: player.x,
				y: player.y - player.size/2
			};
			bullets.push(bullet);
		}

		function detectCollision() {

			for (var i = 0; i < bullets.length; i++) {
				for (var j = 0; j < enemies.length; j++) {
					var dx = bullets[i].x - enemies[j].x;
					var dy = bullets[i].y - enemies[j].y;
					var dist = Math.sqrt(dx*dx + dy*dy);
					if (dist < 15) {
						bullets.splice(i, 1);
						i--;
						enemies.splice(j, 1);
						j--;
					}
				}
			}

			for (var i = 0; i < enemies.length; i++) {
				var dx = player.x - enemies[i].x;
				var dy = player.y - enemies[i].y;
				var dist = Math.sqrt(dx*dx + dy*dy);
				if (dist < 20) {
					location.reload();
				}
			}

		}

	</script>

</body>
</html>